{% extends "base_with_sidebar.html" %}
{% load static %}

{% block css %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
{% endblock css %}

{% block content %}

<script>
  $(document).ready(function () {
    $("#followButton").click(function () {
      $.ajax({
        url: '{% url "author_followed" pk=author.pk %}',
        method: 'GET',
        success: function (data) {
          // Update the like count
          $('#followButton').text("Requested");
        }
      });
    });
  });
</script>

<div style="padding:25px;">
  <h1>Welcome to {{author}}'s profile.</h1>
  {% if user.username == author.username %} <!-- only allow users to update their own profiles; current user username must match that of author-->
      <a href="{% url 'author_edit' pk=author.pk %}">Edit Profile</a>
  {% else %} <!-- someone else's profile-->
    {% if already_following == True %} <!--if user already following this user, hide follow button-->
      <p>Following</p>
    {% else %} <!--not following this user; show follow button-->
      <button id="followButton" type="button">Follow</button>
    {% endif %}
  {% endif %}
  <h2>Avatar</h2>
  <img src="{{ author.profile_image }}" href="{% static 'css/main.css' %}" class="user_icon" style="width: 200px; height:200px;"> <!--To edit image styling, go to css/main.css-->
  <h2>Personal Info</h2>
  <p>TBA</p>
  <h2>Followers</h2>
  <ul>
    {% for follower in followers.followers %}
      <li>{{ follower.username }}</li>
    {% endfor %}
  </ul>
</div>
{% endblock content %}